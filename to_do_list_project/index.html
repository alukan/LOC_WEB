<!DOCTYPE html>
<html>

<head>
  <title>To Do List</title>
</head>

<body>
  <!-- <ul> - list, <li>-list item -->
  <h1>To Do List</h1>
  <input id="textSpace" type="text" placeholder="Enter something..." />
  <button id="addButton">Add</button>
  <ul id="list"></ul>
</body>

<script>
  //js
  //call /tasks and get all tasks from server
  /*
   */
  //
  let tasks = []; // put here tasks from data.tasks because "data.tasks" exsits only in ".then" block
  //
  fetch("http://localhost:3000/tasks")
    .then((response) => {
      if (!response.ok) {
        throw new Error("Network response was not ok");
      }

      return response.json();
    }) //    \/
    .then((data) => {
      console.log(data.tasks);
      tasks = data.tasks;
      let list = document.getElementById("list");
      //<li>

      console.log(tasks.length);
      for (let i = 0; i < tasks.length; i += 1) {
        listItem = document.createElement("li");
        listItem.textContent = tasks[i];
        list.appendChild(listItem);
      }
      //for or while
      let addButton = document.getElementById("addButton");
      let textSpace = document.getElementById("textSpace");
    });

  addButton.addEventListener("click", () => {
    console.log(textSpace.value);
    fetch("http://localhost:3000/addTask", {
      method: "POST",
      headers: {
        'Content-Type': 'application/json', // Set the content type of the request
      },
      body: JSON.stringify({ task: textSpace.value }),
    });
  });
</script>

</html>